---
description: Qubes OS networking and qubes.ConnectTCP for cross-VM access
alwaysApply: true
---

# Qubes OS Networking

## Default model

- VMs are client-only; NetVM masquerades outbound, blocks inbound
- VMs get IPs in 10.137.x.x range, not routable from other VMs

## qubes.ConnectTCP (preferred)

Built-in qrexec service for safe TCP tunnelling between VMs. No network routing changes needed.

### How it works

1. **Dom0 policy** allows specific VMs to connect to specific ports on a target VM
2. **Client VM** runs `qvm-connect-tcp <local-port>:<target-vm>:<remote-port>`
3. Traffic goes through **Xen vchan** (not the network stack) â€” fully isolated

### Dom0 policy example

```
# /etc/qubes/policy.d/50-openclaw.policy
qubes.ConnectTCP +32125 @anyvm openclaw-vm allow
qubes.ConnectTCP +18789 @anyvm openclaw-vm allow
```

### Client usage

```bash
qvm-connect-tcp 32125:openclaw-vm:32125
curl http://localhost:32125/health
```

### For OpenClaw integration

The server VM runs proxy (:32125) and gateway (:18789). Client VMs use `qubes.ConnectTCP` to get local tunnels. No firewall holes, no IP forwarding, no qubes-network-server.
